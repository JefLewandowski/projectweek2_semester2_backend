{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Gebruiker/OneDrive/Bureaublad/Product/Product/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport axios from 'axios';\nVue.use(Vuex);\nexport default new Vuex.Store({\n  state: {\n    productsArray: [],\n    user: {\n      isAuthenticated: false,\n      name: \"\",\n      email: \"\",\n      idToken: \"\",\n      accessToken: \"\",\n      partner: false\n    },\n    endpoints: {\n      login: \"http://localhost:3000/login\",\n      partnercheck: \"http://localhost:8000/check\",\n      products: \"http://localhost:8000/products\"\n    }\n  },\n  getters: {\n    getProducts: function getProducts(state) {\n      return state.productsArray;\n    }\n  },\n  mutations: {\n    logout: function logout(state) {\n      state.user.isAuthenticated = false;\n      state.user.name = \"\";\n      state.user.email = \"\";\n      state.user.idToken = \"\";\n      state.user.accessToken = \"\";\n      state.user.partner = \"\";\n    },\n    login: function login(state, payload) {\n      state.user.isAuthenticated = true;\n      state.user.name = payload.name;\n      state.user.email = payload.email;\n      state.user.idToken = payload.idToken;\n      state.user.accessToken = payload.accessToken;\n    },\n    SET_PARTNER: function SET_PARTNER(state, partner) {\n      state.user.partner = partner;\n    }\n  },\n  actions: {\n    getProducts: function getProducts(state) {\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var response;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return fetch(state.endpoints.products, {\n                  method: 'GET'\n                });\n\n              case 2:\n                response = _context.sent;\n\n                if (response.ok) {\n                  state.productsArray = response;\n                }\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    checkPartner: function checkPartner(_ref) {\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var state, commit, accessToken, AuthStr, AuthHeader, response;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                state = _ref.state, commit = _ref.commit;\n                accessToken = state.user.accessToken;\n                console.log(\"checking partner access\", state.endpoints.partnercheck);\n                AuthStr = 'Bearer '.concat(accessToken);\n                AuthHeader = {\n                  'Authorization': AuthStr\n                };\n                console.log(\"AuthToken=\", AuthHeader);\n                _context2.next = 8;\n                return fetch(state.endpoints.partnercheck, {\n                  method: 'GET',\n                  headers: {\n                    'Authorization': AuthStr\n                  }\n                });\n\n              case 8:\n                response = _context2.sent;\n                console.log(\"partneraccess\", response);\n\n                if (response.ok) {\n                  commit('SET_PARTNER', true);\n                  console.log(\"TRUE\");\n                } else {\n                  commit('SET_PARTNER', false);\n                  console.log(\"FALSE\");\n                }\n\n              case 11:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    },\n    registerProduct: function registerProduct(_ref2, obj) {\n      var state = _ref2.state;\n      var productsurl = state.endpoints.products;\n      console.log(productsurl);\n      var accessToken = state.user.accessToken;\n      var AuthStr = 'Bearer '.concat(accessToken);\n      console.log(AuthStr);\n      console.log(obj);\n      axios(productsurl, {\n        method: 'POST',\n        headers: {\n          'Accept': '*/*',\n          'Content-Type': 'application/json',\n          'Authorization': AuthStr\n        },\n        credentials: 'include',\n        data: obj\n      }).then(function (response) {\n        console.log('Response:', response);\n      }).catch(function (error) {\n        console.error('Error:', error);\n      });\n    }\n  },\n  modules: {}\n});","map":{"version":3,"sources":["C:/Users/Gebruiker/OneDrive/Bureaublad/Product/Product/src/store/index.js"],"names":["Vue","Vuex","axios","use","Store","state","productsArray","user","isAuthenticated","name","email","idToken","accessToken","partner","endpoints","login","partnercheck","products","getters","getProducts","mutations","logout","payload","SET_PARTNER","actions","fetch","method","response","ok","checkPartner","commit","console","log","AuthStr","concat","AuthHeader","headers","registerProduct","obj","productsurl","credentials","data","then","catch","error","modules"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport axios from 'axios'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  state: {\n    productsArray: [],\n    user: {\n      isAuthenticated: false,\n      name: \"\",\n      email: \"\",\n      idToken: \"\",\n      accessToken: \"\",\n      partner: false\n    },\n    endpoints: {\n      login: \"http://localhost:3000/login\",\n      partnercheck: \"http://localhost:8000/check\",\n      products: \"http://localhost:8000/products\",\n    },\n  },\n  getters: {\n      getProducts(state) {\n        return state.productsArray;\n      }\n  },\n  mutations: {\n    logout(state) {\n      state.user.isAuthenticated = false;\n      state.user.name = \"\";\n      state.user.email =\"\";\n      state.user.idToken =\"\";\n      state.user.accessToken = \"\";\n      state.user.partner = \"\";\n    },\n    login(state, payload) {\n      state.user.isAuthenticated = true;\n      state.user.name = payload.name;\n      state.user.email =payload.email;\n      state.user.idToken =payload.idToken;\n      state.user.accessToken =payload.accessToken;\n    },\n     SET_PARTNER(state, partner) { \n      state.user.partner = partner;\n    },\n  },\n  actions: {\n    async getProducts(state){\n        let response = await fetch(state.endpoints.products, {\n          method: 'GET'\n        });\n        if (response.ok) {\n          state.productsArray = response;\n        }\n    },\n    async checkPartner({ state, commit }) {\n      let accessToken = state.user.accessToken;\n      console.log(\"checking partner access\", state.endpoints.partnercheck);\n      const AuthStr = 'Bearer '.concat(accessToken);\n      const AuthHeader = { 'Authorization': AuthStr};\n      console.log(\"AuthToken=\",AuthHeader);\n      let response = await fetch(state.endpoints.partnercheck, { \n        method: 'GET',\n        headers: {\n          'Authorization': AuthStr }\n        });\n      console.log(\"partneraccess\",response);\n      if (response.ok) {\n        commit('SET_PARTNER', true);\n        console.log(\"TRUE\");\n      } else {\n        commit('SET_PARTNER', false);\n        console.log(\"FALSE\");\n      }\n    },\n    registerProduct({ state }, obj) {\n      let productsurl = state.endpoints.products;\n      console.log(productsurl);\n      let accessToken = state.user.accessToken;\n      const AuthStr = 'Bearer '.concat(accessToken);\n      console.log(AuthStr);\n      console.log(obj);\n      axios(productsurl, { \n          method: 'POST',\n          headers: {\n            'Accept': '*/*',\n            'Content-Type': 'application/json',\n            'Authorization': AuthStr\n          },\n          credentials: 'include',\n          data: obj\n      })\n      .then(response => {\n        console.log('Response:', response);\n      })\n      .catch((error) => {\n        console.error('Error:', error);\n      });\n    },\n  },\n  modules: {\n  }\n})"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Gebruiker/OneDrive/Bureaublad/Product/Product/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport axios from 'axios';\nVue.use(Vuex);\nexport default new Vuex.Store({\n  state: {\n    productsArray: [],\n    user: {\n      isAuthenticated: false,\n      name: \"\",\n      email: \"\",\n      idToken: \"\",\n      accessToken: \"\",\n      partner: false\n    },\n    endpoints: {\n      login: \"http://localhost:3000/login\",\n      partnercheck: \"http://localhost:8000/check\",\n      products: \"http://localhost:8000/products\"\n    }\n  },\n  getters: {\n    getProducts: function getProducts(state) {\n      return state.productsArray;\n    }\n  },\n  mutations: {\n    logout: function logout(state) {\n      state.user.isAuthenticated = false;\n      state.user.name = \"\";\n      state.user.email = \"\";\n      state.user.idToken = \"\";\n      state.user.accessToken = \"\";\n      state.user.partner = \"\";\n    },\n    login: function login(state, payload) {\n      state.user.isAuthenticated = true;\n      state.user.name = payload.name;\n      state.user.email = payload.email;\n      state.user.idToken = payload.idToken;\n      state.user.accessToken = payload.accessToken;\n    },\n    SET_PARTNER: function SET_PARTNER(state, partner) {\n      state.user.partner = partner;\n    },\n    SET_PRODUCTS: function SET_PRODUCTS(state, product) {\n      state.productsArray = product;\n    }\n  },\n  actions: {\n    getProducts: function getProducts(_ref) {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var commit, data;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                commit = _ref.commit;\n                _context.prev = 1;\n                _context.next = 4;\n                return axios.get(_this.state.endpoints.products);\n\n              case 4:\n                data = _context.sent;\n                commit('SET_PRODUCTS', data.data);\n                _context.next = 12;\n                break;\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](1);\n                alert(_context.t0);\n                console.log(_context.t0);\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 8]]);\n      }))();\n    },\n    checkPartner: function checkPartner(_ref2) {\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var state, commit, accessToken, AuthStr, AuthHeader, response;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                state = _ref2.state, commit = _ref2.commit;\n                accessToken = state.user.accessToken;\n                console.log(\"checking partner access\", state.endpoints.partnercheck);\n                AuthStr = 'Bearer '.concat(accessToken);\n                AuthHeader = {\n                  'Authorization': AuthStr\n                };\n                console.log(\"AuthToken=\", AuthHeader);\n                _context2.next = 8;\n                return fetch(state.endpoints.partnercheck, {\n                  method: 'GET',\n                  headers: {\n                    'Authorization': AuthStr\n                  }\n                });\n\n              case 8:\n                response = _context2.sent;\n                console.log(\"partneraccess\", response);\n\n                if (response.ok) {\n                  commit('SET_PARTNER', true);\n                  console.log(\"TRUE\");\n                } else {\n                  commit('SET_PARTNER', false);\n                  console.log(\"FALSE\");\n                }\n\n              case 11:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    },\n    registerProduct: function registerProduct(_ref3, obj) {\n      var state = _ref3.state;\n      var productsurl = state.endpoints.products;\n      console.log(productsurl);\n      var accessToken = state.user.accessToken;\n      var AuthStr = 'Bearer '.concat(accessToken);\n      console.log(AuthStr);\n      console.log(obj);\n      axios(productsurl, {\n        method: 'POST',\n        headers: {\n          'Accept': '*/*',\n          'Content-Type': 'application/json',\n          'Authorization': AuthStr\n        },\n        credentials: 'include',\n        data: obj\n      }).then(function (response) {\n        console.log('Response:', response);\n      }).catch(function (error) {\n        console.error('Error:', error);\n      });\n    }\n  },\n  modules: {}\n});","map":{"version":3,"sources":["C:/Users/Gebruiker/OneDrive/Bureaublad/Product/Product/src/store/index.js"],"names":["Vue","Vuex","axios","use","Store","state","productsArray","user","isAuthenticated","name","email","idToken","accessToken","partner","endpoints","login","partnercheck","products","getters","getProducts","mutations","logout","payload","SET_PARTNER","SET_PRODUCTS","product","actions","commit","get","data","alert","console","log","checkPartner","AuthStr","concat","AuthHeader","fetch","method","headers","response","ok","registerProduct","obj","productsurl","credentials","then","catch","error","modules"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport axios from 'axios'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  state: {\n    productsArray: [],\n    user: {\n      isAuthenticated: false,\n      name: \"\",\n      email: \"\",\n      idToken: \"\",\n      accessToken: \"\",\n      partner: false\n    },\n    endpoints: {\n      login: \"http://localhost:3000/login\",\n      partnercheck: \"http://localhost:8000/check\",\n      products: \"http://localhost:8000/products\",\n    },\n  },\n  getters: {\n      getProducts: (state) => state.productsArray\n  },\n  mutations: {\n    logout(state) {\n      state.user.isAuthenticated = false;\n      state.user.name = \"\";\n      state.user.email =\"\";\n      state.user.idToken =\"\";\n      state.user.accessToken = \"\";\n      state.user.partner = \"\";\n    },\n    login(state, payload) {\n      state.user.isAuthenticated = true;\n      state.user.name = payload.name;\n      state.user.email =payload.email;\n      state.user.idToken =payload.idToken;\n      state.user.accessToken =payload.accessToken;\n    },\n     SET_PARTNER(state, partner) { \n      state.user.partner = partner;\n    },\n    SET_PRODUCTS(state, product) {\n      state.productsArray = product\n    }\n  },\n  actions: {\n    async getProducts({ commit }){\n        try{\n          const data = await axios.get(this.state.endpoints.products)\n          commit('SET_PRODUCTS', data.data)\n          \n        }catch (error) {\n          alert(error)\n          console.log(error)\n        }\n        \n    },\n    async checkPartner({ state, commit }) {\n      let accessToken = state.user.accessToken;\n      console.log(\"checking partner access\", state.endpoints.partnercheck);\n      const AuthStr = 'Bearer '.concat(accessToken);\n      const AuthHeader = { 'Authorization': AuthStr};\n      console.log(\"AuthToken=\",AuthHeader);\n      let response = await fetch(state.endpoints.partnercheck, { \n        method: 'GET',\n        headers: {\n          'Authorization': AuthStr }\n        });\n      console.log(\"partneraccess\",response);\n      if (response.ok) {\n        commit('SET_PARTNER', true);\n        console.log(\"TRUE\");\n      } else {\n        commit('SET_PARTNER', false);\n        console.log(\"FALSE\");\n      }\n    },\n    registerProduct({ state }, obj) {\n      let productsurl = state.endpoints.products;\n      console.log(productsurl);\n      let accessToken = state.user.accessToken;\n      const AuthStr = 'Bearer '.concat(accessToken);\n      console.log(AuthStr);\n      console.log(obj);\n      axios(productsurl, { \n          method: 'POST',\n          headers: {\n            'Accept': '*/*',\n            'Content-Type': 'application/json',\n            'Authorization': AuthStr\n          },\n          credentials: 'include',\n          data: obj\n      })\n      .then(response => {\n        console.log('Response:', response);\n      })\n      .catch((error) => {\n        console.error('Error:', error);\n      });\n    },\n  },\n  modules: {\n  }\n})"]},"metadata":{},"sourceType":"module"}